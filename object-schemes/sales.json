{
  "title": "Продажи",
  "table": "sales",
  "is_trash": true,
  "properties": [{
    "title": "Посещения",
    "article": "visits_ids",
    "data_type": "array",
    "field_type": "list",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": true,
    "is_in_search": true,
    "use_in_commands": ["hook", "add", "return", "update"],
    "require_in_commands": [],
    "join": {
      "connection_table": "salesVisits",
      "donor_table": "visits",
      "property_article": "start_at",
      "insert_property": "sale_id",
      "filter_property": "visit_id"
    },
    "is_hook": true,
    "is_visible": false
  }, {
    "title": "Тип операции",
    "article": "pay_type",
    "data_type": "string",
    "field_type": "list",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": true,
    "use_in_commands": ["add", "update", "get", "return", "hook"],
    "require_in_commands": ["add"],
    "custom_list": [{
      "title": "Продажа",
      "value": "sell"
    }, {
      "title": "Возврат",
      "value": "sellReturn"
    }, {
      "title": "Пополнение депозита",
      "value": "deposit"
    }],
    "is_visible": false
  }, {
    "title": "Списать бонусов",
    "article": "bonus_sum",
    "data_type": "float",
    "field_type": "price",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": true,
    "use_in_commands": ["add", "update", "hook", "return"],
    "is_hook": true,
    "require_in_commands": [],
    "min_value": 0
  }, {
    "title": "Списать с депозита",
    "article": "deposit_sum",
    "data_type": "float",
    "field_type": "price",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": true,
    "use_in_commands": ["add", "update", "hook", "return"],
    "is_hook": true,
    "min_value": 0
  }, {
    "title": "Сумма списания с карты",
    "article": "card_sum",
    "data_type": "float",
    "field_type": "price",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": true,
    "use_in_commands": ["add", "update", "hook", "return"],
    "require_in_commands": ["add", "return"],
    "is_hook": true,
    "min_value": 0,
    "is_visible": false
  }, {
    "title": "Сумма наличными",
    "article": "cash_sum",
    "data_type": "float",
    "field_type": "price",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": true,
    "use_in_commands": ["add", "update", "hook", "return"],
    "require_in_commands": ["add", "return"],
    "is_hook": true,
    "min_value": 0
  }, {
    "title": "Статус оплаты",
    "article": "status",
    "data_type": "string",
    "field_type": "string",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": false,
    "use_in_commands": ["add", "update", "return"],
    "require_in_commands": [],
    "custom_list": [{
      "title": "В процессе",
      "value": "waiting"
    }, {
      "title": "Успешно",
      "value": "done"
    }, {
      "title": "Ошибка",
      "value": "error"
    }]
  }, {
    "title": "Текст ошибки",
    "article": "error",
    "data_type": "string",
    "field_type": "textarea",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": false,
    "use_in_commands": ["add", "update"]
  }, {
    "title": "Код возврата по карте",
    "article": "terminal_code",
    "data_type": "string",
    "field_type": "string",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": false,
    "use_in_commands": ["update"]
  }, {
    "title": "Дата и время операции",
    "article": "created_at",
    "data_type": "datetime",
    "field_type": "datetime",
    "is_default_in_list": true,
    "is_unique": false,
    "is_autofill": false,
    "use_in_commands": ["add", "get"],
    "is_in_search": true
  }, {
    "title": "Филиал",
    "article": "store_id",
    "data_type": "integer",
    "field_type": "list",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": true,
    "list_donor": {
      "table": "stores",
      "properties_title": "title"
    },
    "use_in_commands": ["hook", "add", "return"],
    "require_in_commands": [],
    "is_visible": false
  }, {
    "title": "Сотрудник",
    "article": "employee",
    "data_type": "integer",
    "field_type": "list",
    "is_default_in_list": true,
    "is_unique": false,
    "is_autofill": true,
    "list_donor": {
      "table": "users",
      "properties_title": "last_name"
    },
    "use_in_commands": ["add", "update"],
    "require_in_commands": []
  }, {
    "title": "Услуга",
    "article": "pay_object",
    "data_type": "array",
    "field_type": "list",
    "is_default_in_list": true,
    "is_unique": false,
    "is_autofill": true,
    "settings": {
      "is_duplicate": true
    },
    "join": {
      "connection_table": "salesServices",
      "donor_table": "services",
      "insert_property": "sale_id",
      "filter_property": "service_id",
      "property_article": "title"
    },
    "use_in_commands": ["get", "add", "return", "update", "hook"],
    "require_in_commands": ["add", "return"],
    "is_hook": true
  }, {
    "title": "Способ оплаты",
    "article": "pay_method",
    "data_type": "string",
    "field_type": "list",
    "is_default_in_list": true,
    "is_unique": false,
    "is_autofill": true,
    "use_in_commands": ["hook", "update", "add", "return"],
    "custom_list": [{
      "title": "Наличные",
      "value": "cash"
    }, {
      "title": "Безналичные",
      "value": "card"
    }, {
      "title": "Раздельная",
      "value": "parts"
    }],
    "is_hook": true,
    "require_in_commands": ["add", "return"]
  }, {
    "title": "Сумма к оплате",
    "article": "summary",
    "data_type": "float",
    "field_type": "price",
    "is_default_in_list": true,
    "is_unique": false,
    "is_autofill": true,
    "list_donor": {
      "table": null,
      "properties_title": null
    },
    "use_in_commands": ["add", "hook", "return", "update"],
    "require_in_commands": ["add", "return"]
  }, {
    "title": "Онлайн чек",
    "article": "online_receipt",
    "data_type": "boolean",
    "field_type": "checkbox",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": true,
    "use_in_commands": ["update", "add", "return"],
    "require_in_commands": []
  }, {
    "title": "Все посещения",
    "article": "is_combined",
    "data_type": "boolean",
    "field_type": "checkbox",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": true,
    "use_in_commands": ["update", "get", "add", "hook"],
    "require_in_commands": [],
    "is_hook": true
  }, {
    "title": "Клиент",
    "article": "client_id",
    "data_type": "integer",
    "field_type": "list",
    "is_default_in_list": true,
    "is_unique": false,
    "is_autofill": true,
    "list_donor": {
      "table": "clients",
      "properties_title": "last_name"
    },
    "use_in_commands": ["add", "update", "return", "hook"],
    "is_hook": true,
    "require_in_commands": ["add", "return"],
    "is_visible": false
  }, {
    "title": "Вернуть бонусы",
    "article": "return_bonuses",
    "data_type": "boolean",
    "field_type": "checkbox",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": true,
    "use_in_commands": ["add", "hook"],
    "is_hook": true
  }, {
    "title": "Вернуть депозит",
    "article": "return_deposit",
    "data_type": "boolean",
    "field_type": "checkbox",
    "is_default_in_list": true,
    "is_unique": false,
    "is_autofill": true,
    "use_in_commands": ["add", "hook"]
  }, {
    "title": "Услуги (техническое поле)",
    "article": "services",
    "data_type": "array",
    "field_type": "list",
    "is_default_in_list": false,
    "is_unique": false,
    "is_autofill": true,
    "list_donor": {
      "table": "services",
      "properties_title": "title"
    },
    "is_visible": false,
    "use_in_commands": ["add", "hook"]
  }],
  "action_buttons": [{
    "type": "href",
    "settings": {
      "title": "Вернуть",
      "background": "dark",
      "icon": "trash",
      "object": "sales",
      "command": "return",
      "data": {
        "id": ":id"
      },
      "page": ["payments/return/", ":id"]
    }
  }]
}